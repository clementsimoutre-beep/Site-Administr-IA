<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plomberie Dutuyau - Devis en ligne</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: #000; color: #fff;
            /* AJUSTEMENT DU PADDING TOP POUR LA BANNI√àRE */
            padding-top: 78px; 
            padding-bottom: 60px;
        }
        
        /* NOUVEAU : BANNI√àRE D'AVERTISSEMENT */
        .alert-banner {
            position: fixed; top: 0; left: 0; width: 100%;
            background: #d90000; /* Rouge vif */
            color: white; text-align: center; padding: 8px 0;
            font-size: 14px; font-weight: 600; z-index: 2000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        /* NAVIGATION */
        nav {
            /* AJUSTEMENT DE LA NAVIGATION POUR LAISSER LA PLACE √Ä LA BANNI√àRE */
            position: fixed; top: 38px; 
            width: 100%; padding: 20px 60px;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .logo {
            font-size: 24px; font-weight: 800;
            background: linear-gradient(135deg, #00f5ff 0%, #0099ff 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            cursor: pointer;
        }
        .nav-links { display: flex; gap: 30px; align-items: center; }
        .nav-links a {
            color: #fff; text-decoration: none; font-weight: 500; font-size: 15px;
            transition: all 0.3s; opacity: 0.7;
        }
        .nav-links a:hover, .nav-links a.active { opacity: 1; color: #00f5ff; }
        .nav-links .cta-btn {
            background: linear-gradient(135deg, #00f5ff 0%, #0099ff 100%);
            padding: 10px 24px; border-radius: 50px; opacity: 1; color: #fff;
        }
        .nav-links .cta-btn:hover { box-shadow: 0 0 20px rgba(0, 245, 255, 0.4); }

        /* HEADER */
        .header-section {
            padding-top: 20px; text-align: center; margin-bottom: 40px; 
            max-width: 1200px; margin-left: auto; margin-right: auto;
            padding: 20px;
        }
        h1 {
            font-size: 48px; font-weight: 900; margin-bottom: 20px;
            background: linear-gradient(135deg, #fff 0%, #00f5ff 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .subtitle { font-size: 18px; opacity: 0.8; max-width: 700px; margin: 0 auto; }
        .step-info {
            background: rgba(0, 245, 255, 0.1); color: #00f5ff; padding: 10px 20px;
            border-radius: 10px; margin-top: 20px; font-weight: 600;
        }

        /* FORM STYLES */
        .devis-container {
            max-width: 900px; margin: 0 auto; padding: 0 20px;
        }
        .form-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 40px; border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }

        /* Groupes de modules */
        .module-group h2 {
            font-size: 28px; color: #00f5ff; margin-bottom: 20px; border-bottom: 2px solid rgba(0, 245, 255, 0.3); padding-bottom: 10px;
        }
        .module-list {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .module-item {
            background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex; flex-direction: column; cursor: pointer;
            transition: all 0.3s;
        }
        .module-item:hover, .module-item.selected {
            border-color: #00f5ff;
            background: rgba(0, 245, 255, 0.15);
        }
        .module-item.selected {
            box-shadow: 0 0 15px rgba(0, 245, 255, 0.5);
        }
        .module-item h3 { font-size: 18px; margin-bottom: 5px; }
        .module-item p { font-size: 12px; opacity: 0.7; }
        .module-item span {
            margin-top: 10px; font-weight: 600; color: #fff;
        }
        
        /* Radios / Checkboxes stylis√©s (pour les modules) */
        .module-item label {
            display: flex; align-items: center;
            cursor: pointer;
            position: relative;
            user-select: none;
            flex-grow: 1; /* Permet au label de prendre la taille du conteneur */
        }

        .module-item input[type="checkbox"] {
            /* Cacher la checkbox native */
            opacity: 0;
            position: absolute;
        }

        .module-content {
            flex-grow: 1;
        }
        
        .custom-checkbox {
            width: 20px; height: 20px; border-radius: 5px; border: 2px solid #ccc;
            background-color: transparent; margin-right: 15px;
            transition: all 0.3s;
            flex-shrink: 0; /* Emp√™che de r√©tr√©cir */
            display: flex; align-items: center; justify-content: center;
        }

        .module-item.selected .custom-checkbox {
            background-color: #00f5ff;
            border-color: #00f5ff;
        }
        
        .custom-checkbox::after {
            content: '‚úì';
            color: #000;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .module-item.selected .custom-checkbox::after {
            opacity: 1;
        }

        /* S√âLECTION FINITIONS */
        .finitions-grid {
            display: flex; gap: 20px; justify-content: space-around;
        }
        .finition-item {
            flex-grow: 1;
            padding: 20px; border-radius: 10px; text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer; transition: all 0.3s;
            background: rgba(0, 0, 0, 0.3);
        }
        .finition-item:hover, .finition-item.selected {
            border-color: #00f5ff;
            background: rgba(0, 245, 255, 0.15);
            box-shadow: 0 0 15px rgba(0, 245, 255, 0.5);
        }
        .finition-item h3 { color: #00f5ff; margin-bottom: 5px; }
        .finition-item p { font-size: 14px; opacity: 0.8; }

        /* R√âCAPITULATIF */
        .recap-section {
            background: #111; padding: 40px; border-radius: 20px;
            border: 1px solid #0099ff;
        }
        .recap-section h2 {
            font-size: 32px; color: #fff; margin-bottom: 25px; text-align: center;
        }
        .recap-line {
            display: flex; justify-content: space-between; padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            font-size: 16px;
        }
        .recap-line span:first-child { opacity: 0.8; }
        .recap-line.total {
            border-top: 2px solid #00f5ff; border-bottom: none;
            padding-top: 15px; margin-top: 15px;
            font-size: 24px; font-weight: 700; color: #00f5ff;
        }

        /* BOUTON ENVOI */
        .submit-container { text-align: center; margin-top: 40px; }
        #submitDevis {
            padding: 15px 40px; background: linear-gradient(135deg, #00f5ff 0%, #0099ff 100%);
            color: #000; border: none; border-radius: 50px; font-size: 20px; font-weight: 700;
            cursor: pointer; transition: 0.3s;
        }
        #submitDevis:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 245, 255, 0.5);
        }

        /* MEDIA QUERIES */
        @media (max-width: 900px) {
            nav { padding: 20px; top: 38px; } /* Ajust√© */
            .nav-links a:not(.cta-btn) { display: none; }
            h1 { font-size: 36px; }
            .form-section { padding: 20px; }
            .module-list { grid-template-columns: 1fr; }
            .finitions-grid { flex-direction: column; }
            /* AJUSTEMENT DU PADDING TOP GLOBAL MOBILE */
            body { padding-top: 78px; }
        }
        
        /* NOUVEAU : STYLES DU FOOTER */
        footer {
            text-align: center; padding: 40px;
            border-top: 1px solid rgba(255,255,255,0.1); color: #888;
        }
        .footer-links a {
            color: #888;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s;
        }
        .footer-links a:hover {
            color: #00f5ff; /* Primary color */
        }
    </style>
</head>
<body>

    <div class="alert-banner">
        ‚ö†Ô∏è Site t√©moin pour tester les solutions Administr-IA. Toutes les informations et photos sont fictives.
    </div>

    <nav>
        <div class="logo" onclick="window.location.href='index.html'">üíß Plomberie Dutuyau</div>
        <div class="nav-links">
            <a href="index.html">Accueil</a>
            <a href="realisations.html">Nos R√©alisations</a>
            <a href="devis.html" class="active">Devis en ligne</a>
            <a href="intervention.html" class="cta-btn">Demande d'intervention</a>
        </div>
    </nav>

    <div class="header-section">
        <h1>Estimez votre projet en ligne</h1>
        <p class="subtitle">
            S√©lectionnez les modules souhait√©s et choisissez le niveau de finition. Une estimation d√©taill√©e appara√Æt en bas.
        </p>
        <p class="step-info">
            √âtape 1 : Choisissez vos modules &nbsp;|&nbsp; √âtape 2 : Choisissez la finition
        </p>
    </div>

    <div class="devis-container">
        
        <form id="devisForm">
            <div class="form-section module-group">
                <h2>Modules Essentiels</h2>
                <div class="module-list" id="modulesStandard">
                    </div>
            </div>

            <div class="form-section module-group">
                <h2>Modules Avanc√©s</h2>
                <div class="module-list" id="modulesPremium">
                    </div>
            </div>

            <div class="form-section">
                <h2>Niveau de Finition</h2>
                <div class="finitions-grid" id="finitions">
                    <div class="finition-item" data-finition="Standard" data-multiplier="1.05">
                        <h3>Standard</h3>
                        <p>Mat√©riaux fonctionnels, installation classique. **+5% M.O.**</p>
                    </div>
                    <div class="finition-item" data-finition="Design" data-multiplier="1.15">
                        <h3>Design</h3>
                        <p>Mat√©riaux de qualit√©, robinetterie encastr√©e, raccordements invisibles. **+15% M.O.**</p>
                    </div>
                    <div class="finition-item" data-finition="Premium" data-multiplier="1.30">
                        <h3>Premium</h3>
                        <p>Mat√©riaux haut de gamme, domotique, plomberie enti√®rement optimis√©e. **+30% M.O.**</p>
                    </div>
                </div>
            </div>
        </form>

        <div class="recap-section">
            <h2>R√©capitulatif & Estimation TTC</h2>
            <div id="recapDetail">
                <div class="recap-line"><span>Modules de Mat√©riel (Total)</span><span id="recapMaterial">0 ‚Ç¨</span></div>
                <div class="recap-line"><span>Main d'≈íuvre (Base)</span><span id="recapLaborBase">0 ‚Ç¨</span></div>
                <div class="recap-line"><span>Multiplicateur Finition</span><span id="recapMultiplier">x 1.00</span></div>
                <div class="recap-line"><span>Main d'≈íuvre (Ajust√©e)</span><span id="recapLaborFinal">0 ‚Ç¨</span></div>
            </div>
            <div class="recap-line total">
                <span>ESTIMATION TOTALE</span>
                <span id="recapTotal">0 ‚Ç¨</span>
            </div>
            <div class="submit-container">
                <button id="submitDevis" disabled>Valider et demander contact (gratuit)</button>
            </div>
        </div>

    </div> <footer>
        <div class="footer-links" style="margin-bottom: 10px;">
            <a href="mentions-legales.html">Mentions L√©gales</a>
            <span>|</span>
            <a href="politique-confidentialite.html">Politique de Confidentialit√©</a>
        </div>
        <p>&copy; 2025 Plomberie Dutuyau.</p>
    </footer>

    <script>
        // Data Structure pour les modules
        const modulesData = [
            { id: 'sdb', group: 'standard', name: "Installation SDB Compl√®te", mat: 3500, mo: 1800, desc: "R√©novation compl√®te : Douche, baignoire, vasque, WC. (Hors carrelage)" },
            { id: 'cuisine', group: 'standard', name: "Plomberie Cuisine", mat: 1200, mo: 800, desc: "Raccordements √©vier, lave-vaisselle, √Ælot central. (Hors meubles)" },
            { id: 'wc', group: 'standard', name: "Installation WC Suspendu", mat: 550, mo: 350, desc: "Fourniture cuvette, b√¢ti-support et pose. (Hors placo/peinture)" },
            { id: 'chauffeeau', group: 'standard', name: "Chauffe-eau 150L Standard", mat: 600, mo: 300, desc: "Fourniture et remplacement d'un ballon √©lectrique 150L." },
            
            { id: 'adoucisseur', group: 'premium', name: "Adoucisseur d'eau Pro", mat: 2500, mo: 500, desc: "Fourniture et raccordement de l'adoucisseur √† l'arriv√©e principale." },
            { id: 'pac', group: 'premium', name: "Pompe √† Chaleur Air/Eau", mat: 9000, mo: 3500, desc: "√âtude, fourniture et pose d'une PAC (hors gaines/radiateurs sp√©cifiques)." },
            { id: 'baignoireilo', group: 'premium', name: "Baignoire √élot", mat: 1500, mo: 700, desc: "Installation d'une baignoire √Ælot et raccordements au sol." },
            { id: 'doucheitalienne', group: 'premium', name: "Douche √† l'italienne", mat: 800, mo: 600, desc: "Cr√©ation bac de douche encastr√© et √©tanch√©it√© (hors verre/carrelage)." }
        ];

        // √âtat du Devis
        let selectedModules = new Set();
        let selectedFinition = 'Standard'; 
        let multiplier = 1.05; // Standard par d√©faut

        // R√©cup√©ration des conteneurs
        const modulesStandardEl = document.getElementById('modulesStandard');
        const modulesPremiumEl = document.getElementById('modulesPremium');
        const finitionsEl = document.getElementById('finitions');
        const submitButton = document.getElementById('submitDevis');

        // Fonctions de rendu
        function renderModules() {
            // Vider les conteneurs existants
            modulesStandardEl.innerHTML = '';
            modulesPremiumEl.innerHTML = '';

            modulesData.forEach(module => {
                const isSelected = selectedModules.has(module.id);
                const container = module.group === 'standard' ? modulesStandardEl : modulesPremiumEl;

                const moduleEl = document.createElement('div');
                moduleEl.className = 'module-item' + (isSelected ? ' selected' : '');
                moduleEl.setAttribute('data-id', module.id);
                moduleEl.innerHTML = `
                    <label>
                        <input type="checkbox" name="module" value="${module.id}" ${isSelected ? 'checked' : ''}>
                        <div class="custom-checkbox"></div>
                        <div class="module-content">
                            <h3>${module.name}</h3>
                            <p>${module.desc}</p>
                            <span>Mat√©riel : ${module.mat} ‚Ç¨ | M.O. : ${module.mo} ‚Ç¨</span>
                        </div>
                    </label>
                `;
                
                moduleEl.onclick = function(event) {
                    // √âvite de d√©clencher l'√©v√©nement si on clique sur la checkbox elle-m√™me (gestion par le label)
                    if (event.target.tagName !== 'INPUT') {
                        // Inversion de l'√©tat
                        const checkbox = moduleEl.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                        toggleModule(module.id, checkbox.checked);
                    }
                };

                // Gestion du clic direct sur la checkbox pour synchronisation
                moduleEl.querySelector('input[type="checkbox"]').onchange = function(event) {
                    toggleModule(module.id, event.target.checked);
                };

                container.appendChild(moduleEl);
            });
        }

        function renderFinitions() {
            Array.from(finitionsEl.children).forEach(item => {
                const finition = item.getAttribute('data-finition');
                item.className = 'finition-item' + (finition === selectedFinition ? ' selected' : '');
            });
        }

        function toggleModule(id, isChecked) {
            if (isChecked) {
                selectedModules.add(id);
            } else {
                selectedModules.delete(id);
            }
            updateRecap();
            renderModules(); // Re-rendu pour mettre √† jour les classes .selected
        }

        function selectFinition(finition, mult) {
            selectedFinition = finition;
            multiplier = parseFloat(mult);
            updateRecap();
            renderFinitions(); // Re-rendu pour mettre √† jour les classes .selected
        }

        function updateRecap() {
            let totalMaterialCost = 0;
            let totalLaborCost = 0;
            let modulesDetails = [];

            // Calcul des co√ªts et d√©tails
            modulesData.forEach(module => {
                if (selectedModules.has(module.id)) {
                    totalMaterialCost += module.mat;
                    totalLaborCost += module.mo;
                    modulesDetails.push(module.name);
                }
            });

            // Application du multiplicateur de main d'≈ìuvre
            const finalLaborCost = totalLaborCost * multiplier;
            const finalTotal = totalMaterialCost + finalLaborCost;

            // Mise √† jour de l'affichage
            document.getElementById('recapMaterial').textContent = totalMaterialCost.toFixed(0) + ' ‚Ç¨';
            document.getElementById('recapLaborBase').textContent = totalLaborCost.toFixed(0) + ' ‚Ç¨';
            document.getElementById('recapMultiplier').textContent = 'x ' + multiplier.toFixed(2);
            document.getElementById('recapLaborFinal').textContent = finalLaborCost.toFixed(0) + ' ‚Ç¨';
            document.getElementById('recapTotal').textContent = finalTotal.toFixed(0) + ' ‚Ç¨';

            // Activation/D√©sactivation du bouton
            if (selectedModules.size > 0 && multiplier
